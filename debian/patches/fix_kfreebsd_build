From: Debian/Kubuntu Qt/KDE Maintainers <debian-qt-kde@lists.debian.org>
Date: Thu, 31 Mar 2016 15:38:43 +0200
Subject: fix_kfreebsd_build

===================================================================
---
 src/widgets/kpropertiesdialog.cpp | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

diff --git a/src/widgets/kpropertiesdialog.cpp b/src/widgets/kpropertiesdialog.cpp
index d0a2faa..66d6c04 100644
--- a/src/widgets/kpropertiesdialog.cpp
+++ b/src/widgets/kpropertiesdialog.cpp
@@ -76,6 +76,10 @@
 extern "C" {
 #  include <errno.h>
 #  include <sys/xattr.h>
+#  if defined(Q_OS_FREEBSD) || defined(__FreeBSD_kernel__)
+#     include <sys/vfs.h>
+#     include <sys/mount.h>
+#  endif
 }
 #endif
 
@@ -1915,7 +1919,7 @@ KFilePermissionsPropsPlugin::KFilePermissionsPropsPlugin(KPropertiesDialog *_pro
 static bool fileSystemSupportsACL(const QByteArray &path)
 {
     bool fileSystemSupportsACLs = false;
-#ifdef Q_OS_FREEBSD
+#if defined(Q_OS_FREEBSD) || defined(__FreeBSD_kernel__)
     struct statfs buf;
     fileSystemSupportsACLs = (statfs(path.data(), &buf) == 0) && (buf.f_flags & MNT_ACLS);
 #else
