diff --git src/widgets/kpropertiesdialog.cpp b/src/widgets/kpropertiesdialog.cpp
index 0ff5062..217da11 100644
--- src/widgets/kpropertiesdialog.cpp
+++ b/src/widgets/kpropertiesdialog.cpp
@@ -75,6 +75,10 @@
 #if HAVE_POSIX_ACL
 extern "C" {
 #  include <sys/xattr.h>
+#  if defined(Q_OS_FREEBSD) || defined(__FreeBSD_kernel__)
+#     include <sys/vfs.h>
+#     include <sys/mount.h>
+#  endif
 }
 #endif
 
@@ -1915,7 +1919,7 @@ KFilePermissionsPropsPlugin::KFilePermissionsPropsPlugin(KPropertiesDialog *_pro
 static bool fileSystemSupportsACL(const QByteArray &path)
 {
     bool fileSystemSupportsACLs = false;
-#ifdef Q_OS_FREEBSD
+#if defined(Q_OS_FREEBSD) || defined(__FreeBSD_kernel__)
     struct statfs buf;
     fileSystemSupportsACLs = (statfs(path.data(), &buf) == 0) && (buf.f_flags & MNT_ACLS);
 #else
