From: Debian/Kubuntu Qt/KDE Maintainers <debian-qt-kde@lists.debian.org>
Date: Thu, 31 Mar 2016 15:38:43 +0200
Subject: fix_kfreebsd_build

===================================================================
---
 src/widgets/kpropertiesdialog.cpp | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

Index: kio/src/widgets/kpropertiesdialog.cpp
===================================================================
--- kio.orig/src/widgets/kpropertiesdialog.cpp
+++ kio/src/widgets/kpropertiesdialog.cpp
@@ -85,6 +85,10 @@
 extern "C" {
 #  include <errno.h>
 #  include <sys/xattr.h>
+#  if defined(Q_OS_FREEBSD) || defined(__FreeBSD_kernel__)
+#     include <sys/vfs.h>
+#     include <sys/mount.h>
+#  endif
 }
 #endif
 
@@ -1937,7 +1941,7 @@ KFilePermissionsPropsPlugin::KFilePermis
 static bool fileSystemSupportsACL(const QByteArray &path)
 {
     bool fileSystemSupportsACLs = false;
-#ifdef Q_OS_FREEBSD
+#if defined(Q_OS_FREEBSD) || defined(__FreeBSD_kernel__)
     struct statfs buf;
     fileSystemSupportsACLs = (statfs(path.data(), &buf) == 0) && (buf.f_flags & MNT_ACLS);
 #else
